function completeLoading(){function e(){var e=new XMLHttpRequest;o&&(o=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),e.open("GET","hp.ogg",!0),e.responseType="arraybuffer",e.send(),e.onload=function(){o.decodeAudioData(e.response,function(e){t=o.createBufferSource(),t.buffer=e,t.loop=!0,t.connect(o.destination),t[t.start?"start":"noteOn"](0)},function(e){alert(e)})})}if("complete"===document.readyState){$("#loading").remove();var t,o=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,a=isPC();e(),$(function(){function n(e){m=new Date,g=m.getHours(),u=m.getMinutes(),P.clearRect(0,0,300,300);for(var t=0;t<360;t++)P.save(),P.strokeStyle="#b4531e",P.beginPath(),P.translate(150,150),P.rotate(t*Math.PI/180),P.moveTo(0,-140),P.lineTo(0,-120),P.stroke(),P.closePath(),P.restore();P.save(),P.strokeStyle="#ffdc35",P.lineWidth=4,P.beginPath(),P.translate(150,150),P.rotate(30*g*Math.PI/180),P.moveTo(0,0),P.lineTo(0,-50),P.stroke(),P.closePath(),P.restore(),P.save(),P.strokeStyle="#ffe153",P.lineWidth=2,P.beginPath(),P.translate(150,150),P.rotate(6*u*Math.PI/180),P.moveTo(0,0),P.lineTo(0,-70),P.stroke(),P.closePath(),P.restore(),P.save(),P.fillStyle="#f9f937",P.beginPath(),P.translate(150,150),P.rotate(e*Math.PI/180),P.moveTo(0,-105-w),P.lineTo(-7,-105),P.lineTo(7,-105),P.fill(),P.closePath(),P.restore(),P.save(),P.beginPath(),P.strokeStyle="#fff",P.arc(150,150,100,0,2*Math.PI),P.stroke(),P.closePath(),P.restore(),P.beginPath(),P.arc(150,150,8,0,2*Math.PI),P.fill(),P.stroke(),P.closePath(),P.save(),P.fillStyle="#b4531e",P.beginPath(),P.arc(150,150,7,0,2*Math.PI),P.fill(),P.stroke(),P.closePath(),P.restore();for(var t=0;t<100;t++)P.save(),P.lineWidth=.5,P.strokeStyle="rgba(255,255,255,"+(100-t)/100+")",P.beginPath(),P.translate(150,150),P.rotate((e-t)*Math.PI/180),P.moveTo(0,-140),P.lineTo(0,-120),P.closePath(),P.stroke(),P.restore()}var i=$('<canvas id="canvas" width="300" height="300"></canvas>'),s=$('<img src="public/img/home.png" alt="主页图片">'),r=$('<a href="javascript:;" title="音乐暂停"><i class="iconfont music-disable">&#xe638;</i></a>'),l=$('<a href="javascript:;" title="音乐播放"><i class="iconfont music">&#xe612;</i></a>'),c=$("<h1>Jay Zangwill</h1>"),d=$('<li><a href="home.html" title="进入主页">my home</a></li>'),h=$('<li><a href="https://github.com/JayZangwill/blog" title="我的博客">my blog</a></li>'),f=$('<li><a href="https://github.com/JayZangwill" title="github">my github</a></li>');if($(".canvas-wrap").append(i),$(".bg-img").append(s),$(".sound-switch").append(r).append(l),$(".links").append(d).append(h).append(f),$(".name-wrap").append(c),a){var p=$('<video loop autoplay><source src="home.mp4" type="video/mp4"></video>');$(".video").append(p)}if(document.getElementById("canvas").getContext){var g,u,m,v=document.getElementById("canvas"),P=v.getContext("2d"),w=10*Math.sin(Math.PI/3),b=360*(new Date).getSeconds()/60;n(b),setInterval(function(){n(b),b=360===b?360*(new Date).getSeconds()/60:++b},6e4/360)}var y=!0,k=$(".sound-switch a i");document.getElementById("bgSound");k.on("click",function(){y?($(k[0]).css({zIndex:"-2",opacity:"0"}),$(k[1]).css({zIndex:"0",opacity:"1"}),o&&t[t.stop?"stop":"noteOff"](0),y=!1):($(k[0]).css({zIndex:"0",opacity:"1"}),$(k[1]).css({zIndex:"-2",opacity:"0"}),o&&e(),y=!0)})})}}function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=1,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){o=0;break}return o}document.onreadystatechange=completeLoading;
function completeLoading(){function e(){var e=new XMLHttpRequest;o&&(o=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),e.open("GET","hp.ogg",!0),e.responseType="arraybuffer",e.send(),e.onload=function(){o.decodeAudioData(e.response,function(e){t=o.createBufferSource(),t.buffer=e,t.loop=!0,t.connect(o.destination),t[t.start?"start":"noteOn"](0)},function(e){alert(e)})})}if("complete"===document.readyState){$("#loading").remove();var t,o=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,a=isPC();e(),$(function(){function n(e){g=new Date,u=g.getHours(),m=g.getMinutes(),y.clearRect(0,0,300,300);for(var t=0;t<360;t++)y.save(),y.strokeStyle="#b4531e",y.beginPath(),y.translate(150,150),y.rotate(t*Math.PI/180),y.moveTo(0,-140),y.lineTo(0,-120),y.stroke(),y.closePath(),y.restore();y.save(),y.strokeStyle="#ffdc35",y.lineWidth=4,y.beginPath(),y.translate(150,150),y.rotate(30*u*Math.PI/180),y.moveTo(0,0),y.lineTo(0,-50),y.stroke(),y.closePath(),y.restore(),y.save(),y.strokeStyle="#ffe153",y.lineWidth=2,y.beginPath(),y.translate(150,150),y.rotate(6*m*Math.PI/180),y.moveTo(0,0),y.lineTo(0,-70),y.stroke(),y.closePath(),y.restore(),y.save(),y.fillStyle="#f9f937",y.beginPath(),y.translate(150,150),y.rotate(e*Math.PI/180),y.moveTo(0,-105-w),y.lineTo(-7,-105),y.lineTo(7,-105),y.fill(),y.closePath(),y.restore(),y.save(),y.beginPath(),y.strokeStyle="#fff",y.arc(150,150,100,0,2*Math.PI),y.stroke(),y.closePath(),y.restore(),y.beginPath(),y.arc(150,150,8,0,2*Math.PI),y.fill(),y.stroke(),y.closePath(),y.save(),y.fillStyle="#b4531e",y.beginPath(),y.arc(150,150,7,0,2*Math.PI),y.fill(),y.stroke(),y.closePath(),y.restore();for(var t=0;t<100;t++)y.save(),y.lineWidth=.5,y.strokeStyle="rgba(255,255,255,"+(100-t)/100+")",y.beginPath(),y.translate(150,150),y.rotate((e-t)*Math.PI/180),y.moveTo(0,-140),y.lineTo(0,-120),y.closePath(),y.stroke(),y.restore()}var i=$('<canvas id="canvas" width="300" height="300"></canvas>'),s=$('<img src="public/img/home.png" alt="主页图片">'),l=$('<a href="javascript:;" title="音乐暂停"><i class="iconfont music-disable">&#xe638;</i></a>'),r=$('<a href="javascript:;" title="音乐播放"><i class="iconfont music">&#xe612;</i></a>'),c=$("<h1>Jay Zangwill</h1>"),d=$('<li><a href="home.html" title="进入主页">my home</a></li>'),h=$('<li><a href="https://github.com/JayZangwill/blog" title="我的博客">my blog</a></li>'),p=$('<li><a href="https://github.com/JayZangwill" title="github">my github</a></li>');if($(".canvas-wrap").append(i),$(".bg-img").append(s),$(".sound-switch").append(l).append(r),$(".links").append(d).append(h).append(p),$(".name-wrap").append(c),a){var f=$('<video loop autoplay><source src="home.mp4" type="video/mp4"></video>');$(".video").append(f)}if(document.getElementById("canvas")&&document.getElementById("canvas").getContext){var u,m,g,v=document.getElementById("canvas"),y=v.getContext("2d"),w=10*Math.sin(Math.PI/3),P=360*(new Date).getSeconds()/60;n(P),setInterval(function(){n(P),P=360===P?360*(new Date).getSeconds()/60:++P},6e4/360)}var b=!0,I=$(".sound-switch a i");document.getElementById("bgSound");I.on("click",function(){b?($(I[0]).css({zIndex:"-2",opacity:"0"}),$(I[1]).css({zIndex:"0",opacity:"1"}),o&&t[t.stop?"stop":"noteOff"](0),b=!1):($(I[0]).css({zIndex:"0",opacity:"1"}),$(I[1]).css({zIndex:"-2",opacity:"0"}),o&&e(),b=!0)})})}}function isPC(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],o=1,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){o=0;break}return o}$(function(){$(".toTop").hide(),$(window).scroll(function(){$(window).scrollTop()>200?$(".toTop").fadeIn("slow"):$(".toTop").fadeOut("slow")}),$(".toTop").click(function(){return $("body,html").animate({scrollTop:0},500),!1})}),$(function(){$("header h1").animate({left:"10%",opacity:"1"},1e3),$("header h2").delay("1000").animate({left:"13%",opacity:"1"},1e3),$("header h3").delay("2000").animate({left:"15%",opacity:"1"},1e3),$("header p").delay("3000").animate({top:"70%",opacity:"1"},500)}),document.onreadystatechange=completeLoading;